scripted_gui = {
	surplus_appropriation_indicator = {
		context_type = player_context
		window_name = "surplus_appropriation_indicator"
		parent_window_token = top_bar
	}
	surplus_appropriation_menu_entry = {
		context_type = player_context
		window_name = "surplus_appropriation_menu_entry"
		parent_window_name = "after_intel_agency_button"
		effects = {
            surplus_appropriation_menu_entry_button_click = {
				if = {
					limit = {
						check_variable = {
							sam_menu = 1
						}
					}
					set_variable = {
						sam_menu = 0
					}
				}
				else = {
					set_variable = {
						sam_menu = 1
					}
				}
            }
		}
		triggers = {
			surplus_appropriation_menu_entry_button_visible = {
				set_temp_variable = {
					SAME_FRAME = 1
				}
				add_to_temp_variable = {
					SAME_FRAME = sam_menu
				}
			}
		}
		properties = {
			surplus_appropriation_menu_entry_button = {
				frame = SAME_FRAME
			}
		}
	}
	surplus_appropriation_menu = {
		context_type = player_context
		window_name = "surplus_appropriation_menu"
		parent_window_token = top_bar
		visible = {
			check_variable = {
				sam_menu = 1
			}
		}
		dynamic_lists = {
			management_grid = {
				array = global.surplus_appropriation_grid
				change_scope = no
				entry_container = "management_container_entry"
				index = sa_i
			}
		}
		effects = {
			close_button_click = {
				set_variable = {
					sam_menu = 0
				}
			}
			decrease_click = {
				subtract_from_variable = {
					surplus_appropriation_weights^sa_i = 0.1
				}
				calc_surplus_appropriation_real_values = yes
			}
			increase_click = {
				add_to_variable = {
					surplus_appropriation_weights^sa_i = 0.1
				}
				calc_surplus_appropriation_real_values = yes
			}
		}
		properties = {
			slider = {
				x = surplus_appropriation_slider_x_pos^sa_i
			}
			progerss = {
				frame = surplus_appropriation_progressbar_frame^sa_i
			}
		}
	}
}