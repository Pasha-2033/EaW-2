#use in unit leader (officer) scope!
generate_militarist_advisor = {
	if = {
		limit = {
			owner = {
				NOT = {
					OR = {
						has_country_flag = no_generic_militarist_political_advisor
						has_custom_advisors = yes
						has_allowed_idea_with_traits = {
							idea = armourer
							characters = yes
						}
					}
				}
			}
		}
		add_advisor_role = {
			advisor = {
				slot = political_advisor
				cost = 50
				idea_token = THIS
				traits = {
					armourer
				}
			}
		}
	}
}
generate_portrait = {
	meta_effect = {
		text = {
			if = {
				limit = {
					has_idea = polar_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_bear
					}
				}
			}
			else_if = {
				limit = {
					has_idea = buffalo_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_buffalo
					}
				}
			}
			else_if = {
				limit = {
					has_idea = changeling_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_bug
					}
				}
			}
			else_if = {
				limit = {
					has_idea = diamond_dog_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_dog
					}
				}
			}
			else_if = {
				limit = {
					has_idea = dragon_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_dragon
					}
				}
			}
			else_if = {
				limit = {
					has_idea = griffon_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_griffon
					}
				}
			}
			else_if = {
				limit = {
					has_idea = minotaur_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_minotaur
					}
				}
			}
			else_if = {
				limit = {
					has_idea = penguin_race
				}
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor_pingu
					}
				}
			}
			else = {
				set_portraits = {
					character = [C]
					army = {
						small = GFX_idea_unknown_advisor
					}
				}
			}
		}
		C = "[?character_token.GetTokenLocalizedKey]"
	}
	if = {
		limit = {
			has_variable = character_token
		}
		clear_variable = character_token
	}
}