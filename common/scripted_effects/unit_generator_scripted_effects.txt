#Created by lead programmer of EaW 2 (vk: @uber_medic, @communistic_sistema) https://github.com/Pasha-2033/EaW-2
#vesrion 0.5
#use scriped effects, less code, write code with pleasure :)

#argument array structure:
#args^(n) - start ammount, this value allows to create unit if it > 0, every time unit created it decreases by 1, this can guarantee, that country won`t be created without any units
#args^(n+1) - inrease step (how much every state will increase args^(n)), this value and args^(n) allowes to create states with no units: [yes, yes, yes, no, yes, no, yes...]

#for division temlate switch access args by k, where k = 2 * i + argshift
#k - access index
#i - index of division temlate (in abstract array)
#argshift - witch argument for template sould be used
#args - is typical 2d array, that is writed in 1d array

#next versions (upper 1.0) will add new generation argument - for example generation will be repeated by state (state category influence)

#scenario 962
generate_units_962 = {
	#research all technologies, so division can be filled with regired equpment (only base tech! for better optionality)
	set_technology = {
		melee_weapons = 1
		pre_gw_artillery = 1
		tech_support = 1
		tech_engineers = 1
		popup = no
	}
	#load division templates
	load_oob = "_default_962_oob"
	#init default arguments
	add_to_array = {
		args = 1
	}
	add_to_array = {
		args = 0.25
	}
	#override default arguments
	
	#
	every_controlled_state = {
		for_loop_effect = {
			end = PREV.args^num
			value = i
			add = 2
			set_temp_variable = {
				i_1 = i
			}
			add_to_temp_variable = {
				i_1 = 1
			}
			log = "[?PREV.args^0]"
			if = {
				limit = {
					check_variable = {
						PREV.args^i > 0
					}
				}
				#create unit (metaeffect probably)
				meta_effect = {
					text = {
						create_unit = {
							division = "name = \"Generic Infantry Division\" division_template = \"[DT]\" start_experience_factor = 0.5"
							owner = PREV
						}
					}
					DT = "Generic Infantry Division"
				}
				subtract_from_variable = {
					PREV.args^i = 1
				}
			}
			add_to_variable = {
				PREV.args^i = PREV.args^i_1
			}
		}
	}
	#clear data (temp data is lost in state loop)
	clear_array = args
}

#for usege in other mods - copy scenario and modify it, using same logic

#NOTE: version below 1.0 is experimental, so for more universal usage it will be modified (scripted loc)